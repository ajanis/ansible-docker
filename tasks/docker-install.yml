- name: Add the OS specific varibles
  include_vars: "{{ ansible_os_family }}.yml"

- name: install docker packages
  apt:
    name: "{{ docker_pkgs }}"
    update_cache: yes
    state: present

- name: uninstall deprecated python2 docker modules
  pip:
    name: "{{ docker_py2_exclude_pkgs }}"
    state: absent
  when: ansible_python.version.major == 2

- name: install python2 docker modules
  pip:
    name: "{{ docker_py2_pkgs }}"
    state: present
  when: ansible_python.version.major == 2

- name: install python3 docker modules
  pip:
    name: "{{ docker_py3_pkgs }}"
    state: present
  when: ansible_python.version.major == 3
